{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Dashboard{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">


  <!-- Main CSS -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">

</head>
<body>
  <div class="d-flex">

  <!-- Sidebar -->
  <div class="sidebar d-flex flex-column">

    <!-- User + Collapse Button -->
    <div class="user-sidebar d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center">
        <img src="{% static 'img/user.avif' %}" class="rounded-circle user-avatar" width="60" height="60" alt="User">
        <h3 class="ms-2 mb-0 user-name">User</h3>
      </div>

      <button id="sidebarToggle" class="btn btn-sm btn-outline-light sidebar-toggle">
        <i class="bi bi-chevron-left"></i>
      </button>
    </div>

    <!-- Navigation -->
    <nav class="nav flex-column mt-3 sidebar-nav">

      <!-- Dashboard -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
         href="{% url 'home' %}">
        <i class="bi bi-speedometer2 nav-icon me-2"></i>
        <span class="nav-text">Dashboard</span>
      </a>

      <!-- Goals -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'goals' %}active{% endif %}"
         href="{% url 'goals' %}">
        <i class="bi bi-bullseye nav-icon me-2"></i>
        <span class="nav-text">Goals</span>
      </a>

      <!-- Tasks -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'tasks' %}active{% endif %}"
         href="{% url 'tasks' %}">
        <i class="bi bi-check2-square nav-icon me-2"></i>
        <span class="nav-text">Tasks</span>
      </a>

      <!-- Projects -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'project_list' %}active{% endif %}"
         href="{% url 'project_list' %}">
        <i class="bi bi-kanban nav-icon me-2"></i>
        <span class="nav-text">Projects</span>
      </a>

      <hr class="text-muted my-2" style="opacity:0.2;">

      <!-- Messages Header -->
      <button class="nav-link d-flex align-items-center justify-content-between sidebar-group-toggle"
              type="button"
              id="messagesToggle">

        <span>
          <i class="bi bi-envelope nav-icon me-2"></i>
          <span class="nav-text">Messages</span>
        </span>

        <span class="d-flex align-items-center gap-2">
          {% if inbox_unread_count %}
            <span class="badge bg-danger rounded-pill inbox-badge">{{ inbox_unread_count }}</span>
          {% endif %}
          <i class="bi bi-chevron-down small chevron-icon"></i>
        </span>
      </button>

      <!-- Messages submenu -->
      <div id="messagesGroup" class="sidebar-submenu">
        <a class="nav-link d-flex align-items-center sub-link {% if request.resolver_match.url_name == 'inbox' %}active{% endif %}"
           href="{% url 'inbox' %}">
          <i class="bi bi-inbox nav-icon me-2"></i>
          <span class="nav-text">Inbox</span>
        </a>

        <a class="nav-link d-flex align-items-center sub-link {% if request.resolver_match.url_name == 'sent_messages' %}active{% endif %}"
           href="{% url 'sent_messages' %}">
          <i class="bi bi-send nav-icon me-2"></i>
          <span class="nav-text">Sent</span>
        </a>

        <a class="nav-link d-flex align-items-center sub-link {% if request.resolver_match.url_name == 'archived_messages' %}active{% endif %}"
           href="{% url 'archived_messages' %}">
          <i class="bi bi-archive nav-icon me-2"></i>
          <span class="nav-text">Archived</span>
        </a>

        <a class="nav-link d-flex align-items-center sub-link {% if request.resolver_match.url_name == 'compose_message' %}active{% endif %}"
           href="{% url 'compose_message' %}">
          <i class="bi bi-pencil-square nav-icon me-2"></i>
          <span class="nav-text">Compose</span>
        </a>
        <a class="nav-link d-flex align-items-center sub-link {% if request.resolver_match.url_name == 'trash' %}active{% endif %}"
   href="{% url 'trash' %}">
  <i class="bi bi-trash nav-icon me-2"></i>
  <span class="nav-text">Trash</span>
</a>

      </div>

      <hr class="text-muted my-2" style="opacity:0.2;">

      <!-- Profile -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'profile' %}active{% endif %}"
         href="{% url 'profile' %}">
        <i class="bi bi-person-circle nav-icon me-2"></i>
        <span class="nav-text">Profile</span>
      </a>

      <!-- Settings -->
      <a class="nav-link d-flex align-items-center {% if request.resolver_match.url_name == 'settings' %}active{% endif %}"
         href="{% url 'settings' %}">
        <i class="bi bi-gear nav-icon me-2"></i>
        <span class="nav-text">Settings</span>
      </a>

    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content flex-grow-1">


    <!-- Main Content -->
    <div class="main-content flex-grow-1">
      <div class="d-flex justify-content-between align-items-center mb-4">
        {% comment %} <h2 class="fw-bold">{% block header %}Dashboard{% endblock %}</h2> {% endcomment %}

        <div class="d-flex align-items-center gap-3">
          <span id="currentDate" class="text"></span>
          <button id="themeToggle" class="btn btn-outline-light btn-sm">ðŸŒ™</button>
          <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Logout</a>
        </div>
      </div>

      {% block content %}{% endblock %}
    </div>
  </div>

  <!-- Footer Banner -->
  <div id="motivationBanner" class="motivation-banner">
    Keep pushing forward â€” your consistency is paying off! ðŸ’ª
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/dashboard.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</body>
</html>
